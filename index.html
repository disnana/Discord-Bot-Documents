<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disnana - ã‚³ãƒãƒ³ãƒ‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        discord: '#5865F2',
                        'discord-dark': '#4752C4'
                    }
                }
            }
        }
    </script>
    <style>
        .command-card {
            transition: all 0.3s ease;
        }
        .command-card:hover {
            transform: translateY(-2px);
        }
        .details-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .details-content.expanded {
            max-height: 2000px;
            transition: max-height 0.5s ease-in;
        }
        .toggle-details {
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">
    <!-- Header -->
    <header class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-2 sm:px-4 lg:px-6">
            <div class="flex justify-between items-center h-14 sm:h-16">
                <div class="flex items-center">
                    <i class="fas fa-robot text-discord text-xl sm:text-2xl mr-2 sm:mr-3"></i>
                    <div>
                        <span class="text-lg sm:text-xl font-bold text-gray-900">Disnana</span>
                        <span class="text-xs sm:text-sm text-gray-500 ml-1 sm:ml-2 hidden sm:inline">ã‚³ãƒãƒ³ãƒ‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</span>
                    </div>
                </div>
                <div class="flex items-center space-x-2 sm:space-x-4">
                    <span id="commandCount" class="text-xs sm:text-sm text-gray-500">å…¨ 5 ã‚³ãƒãƒ³ãƒ‰</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Search Section -->
    <section class="bg-discord text-white py-4 sm:py-6">
        <div class="max-w-7xl mx-auto px-2 sm:px-4 lg:px-6">
            <div class="text-center mb-4 sm:mb-6">
                <h1 class="text-xl sm:text-3xl font-bold mb-1 sm:mb-2">Disnana ã‚³ãƒãƒ³ãƒ‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</h1>
                <div class="text-sm sm:text-lg opacity-90 flex flex-wrap justify-center gap-2">
                    <span>ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹:</span>
                    <code class="bg-white bg-opacity-20 px-1 sm:px-2 py-0.5 sm:py-1 rounded text-xs sm:text-sm">spb!</code>
                    <span>ã¾ãŸã¯</span>
                    <code class="bg-white bg-opacity-20 px-1 sm:px-2 py-0.5 sm:py-1 rounded text-xs sm:text-sm">/</code>
                </div>
            </div>

            <!-- Search Controls -->
            <div class="max-w-lg mx-auto space-y-3">
                <!-- Search Mode Toggle -->
                <div class="flex bg-white bg-opacity-20 rounded-lg p-1">
                    <button id="nameSearchBtn" class="flex-1 py-2 px-3 rounded-md text-xs sm:text-sm font-medium transition-colors bg-white text-discord">
                        <i class="fas fa-tag mr-1 sm:mr-2"></i>ã‚³ãƒãƒ³ãƒ‰å
                    </button>
                    <button id="fullSearchBtn" class="flex-1 py-2 px-3 rounded-md text-xs sm:text-sm font-medium transition-colors text-white">
                        <i class="fas fa-search mr-1 sm:mr-2"></i>å…¨æ–‡æ¤œç´¢
                    </button>
                </div>

                <!-- Search Box -->
                <div class="relative">
                    <input
                        type="text"
                        id="searchInput"
                        placeholder="ã‚³ãƒãƒ³ãƒ‰ã‚’æ¤œç´¢..."
                        class="w-full px-3 sm:px-4 py-2 sm:py-3 pl-10 sm:pl-12 text-gray-900 bg-white rounded-lg focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 text-sm sm:text-base"
                    >
                    <i class="fas fa-search absolute left-3 sm:left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm sm:text-base"></i>
                </div>
            </div>
        </div>
    </section>

    <!-- Filter and Control Buttons -->
    <section class="bg-white py-3 sm:py-4 border-b">
        <div class="max-w-7xl mx-auto px-2 sm:px-4 lg:px-6">
            <!-- Filter Buttons -->
            <div class="flex flex-wrap justify-center gap-2 sm:gap-3 mb-3" id="filterButtons">
                <button onclick="filterCommands('all')" class="filter-btn bg-discord text-white px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors">
                    <i class="fas fa-list mr-1 sm:mr-2"></i>å…¨ã¦
                </button>
            </div>

            <!-- Expand/Collapse Controls -->
            <div class="flex justify-center space-x-2 sm:space-x-3">
                <button id="expandAllBtn" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors">
                    <i class="fas fa-expand-alt mr-1 sm:mr-2"></i>å…¨ã¦å±•é–‹
                </button>
                <button id="collapseAllBtn" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors">
                    <i class="fas fa-compress-alt mr-1 sm:mr-2"></i>å…¨ã¦æŠ˜ã‚ŠãŸãŸã¿
                </button>
            </div>
        </div>
    </section>

    <!-- Commands Grid -->
    <main class="max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6">
        <!-- Desktop View -->
        <div id="desktopView" class="hidden lg:block">
            <div id="commandsContainer" class="grid grid-cols-1 xl:grid-cols-2 gap-6">
                <!-- Commands will be loaded here -->
            </div>
        </div>

        <!-- Mobile/Tablet View -->
        <div id="mobileView" class="lg:hidden">
            <div id="commandsContainerMobile" class="space-y-4">
                <!-- Commands will be loaded here -->
            </div>
        </div>

        <!-- Loading Message -->
        <div id="loadingMessage" class="text-center py-8 sm:py-12">
            <i class="fas fa-spinner fa-spin text-discord text-2xl sm:text-4xl mb-2 sm:mb-4"></i>
            <h3 class="text-lg sm:text-xl font-semibold text-gray-600 mb-1 sm:mb-2">ã‚³ãƒãƒ³ãƒ‰ã‚’èª­ã¿è¾¼ã¿ä¸­...</h3>
        </div>

        <!-- No Results Message -->
        <div id="noResults" class="hidden text-center py-8 sm:py-12">
            <i class="fas fa-search text-gray-400 text-2xl sm:text-4xl mb-2 sm:mb-4"></i>
            <h3 class="text-lg sm:text-xl font-semibold text-gray-600 mb-1 sm:mb-2">ã‚³ãƒãƒ³ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</h3>
            <p class="text-gray-500 text-sm sm:text-base">æ¤œç´¢æ¡ä»¶ã‚’å¤‰æ›´ã—ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„</p>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-6 sm:py-8 mt-8 sm:mt-12">
        <div class="max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 text-center">
            <div class="flex items-center justify-center mb-2 sm:mb-4">
                <i class="fas fa-robot text-xl sm:text-2xl mr-2 sm:mr-3"></i>
                <span class="text-lg sm:text-xl font-bold">Disnana</span>
            </div>
            <p class="text-gray-400 text-xs sm:text-sm">
                è©³ç´°ãªã‚³ãƒãƒ³ãƒ‰æƒ…å ±ã¯ <code class="bg-gray-800 px-1 sm:px-2 py-0.5 sm:py-1 rounded text-xs">help [ã‚³ãƒãƒ³ãƒ‰å]</code> ã§ç¢ºèªã§ãã¾ã™
            </p>
        </div>
    </footer>

    <!-- Back to Top -->
    <button id="backToTop" class="fixed bottom-4 right-4 sm:bottom-6 sm:right-6 bg-discord hover:bg-discord-dark text-white w-12 h-12 sm:w-14 sm:h-14 rounded-full shadow-lg transition-all opacity-0 pointer-events-none flex items-center justify-center">
        <i class="fas fa-arrow-up text-sm sm:text-base"></i>
    </button>

    <script>
        // ã‚³ãƒãƒ³ãƒ‰ãƒ‡ãƒ¼ã‚¿
        const commandsData = {
            "commands": [
                {
                    "name": "help",
                    "category": "basic",
                    "description": "ãƒœãƒƒãƒˆã®ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹",
                    "detailed_description": "åˆ©ç”¨å¯èƒ½ãªå…¨ã‚³ãƒãƒ³ãƒ‰ã®ä¸€è¦§ã‚’è¡¨ç¤ºã—ã€å„ã‚³ãƒãƒ³ãƒ‰ã®åŸºæœ¬æƒ…å ±ã‚’ç¢ºèªã§ãã¾ã™ã€‚",
                    "usage": "help [ã‚³ãƒãƒ³ãƒ‰å]",
                    "usage_explanation": "ã‚³ãƒãƒ³ãƒ‰å: è©³ç´°ã‚’çŸ¥ã‚ŠãŸã„ã‚³ãƒãƒ³ãƒ‰åï¼ˆçœç•¥å¯ï¼‰",
                    "examples": [
                        {"description": "å…¨ã‚³ãƒãƒ³ãƒ‰ã®ä¸€è¦§ã‚’è¡¨ç¤º", "command": "help"},
                        {"description": "ç‰¹å®šã‚³ãƒãƒ³ãƒ‰ã®è©³ç´°ã‚’è¡¨ç¤º", "command": "help purge"}
                    ],
                    "permissions": "èª°ã§ã‚‚ä½¿ç”¨å¯èƒ½",
                    "cooldown": null,
                    "notes": ["åŸºæœ¬çš„ãªæƒ…å ±ç¢ºèªã«ä½¿ç”¨ã—ã¦ãã ã•ã„"]
                },
                {
                    "name": "hello",
                    "category": "test",
                    "description": "ãƒœãƒƒãƒˆã®å‹•ä½œã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰",
                    "detailed_description": "ãƒœãƒƒãƒˆãŒæ­£å¸¸ã«ç¨¼åƒã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã®ãƒ†ã‚¹ãƒˆã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚",
                    "usage": "hello",
                    "usage_explanation": "ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã‚ã‚Šã¾ã›ã‚“",
                    "examples": [
                        {"description": "ãƒœãƒƒãƒˆã®å¿œç­”ã‚’ãƒ†ã‚¹ãƒˆ", "command": "hello"}
                    ],
                    "permissions": "èª°ã§ã‚‚ä½¿ç”¨å¯èƒ½",
                    "cooldown": null,
                    "notes": ["ãƒœãƒƒãƒˆã®å‹•ä½œç¢ºèªæ™‚ã«ã”åˆ©ç”¨ãã ã•ã„"]
                },
                {
                    "name": "ping",
                    "category": "test",
                    "description": "ãƒœãƒƒãƒˆã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ã‚’æ¸¬å®š",
                    "detailed_description": "ãƒœãƒƒãƒˆã®å¿œç­”é€Ÿåº¦ã¨Discord APIã¨ã®æ¥ç¶šçŠ¶æ³ã‚’ç¢ºèªã§ãã¾ã™ã€‚",
                    "usage": "ping",
                    "usage_explanation": "ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã‚ã‚Šã¾ã›ã‚“",
                    "examples": [
                        {"description": "ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ã‚’ç¢ºèª", "command": "ping"}
                    ],
                    "permissions": "èª°ã§ã‚‚ä½¿ç”¨å¯èƒ½",
                    "cooldown": null,
                    "notes": ["ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çŠ¶æ³ã®ç¢ºèªã«ã”åˆ©ç”¨ãã ã•ã„"]
                },
                {
                    "name": "settings",
                    "category": "management",
                    "description": "Disnanaã®ãƒœãƒƒãƒˆè¨­å®šã‚’å¤‰æ›´",
                    "detailed_description": "ãƒœãƒƒãƒˆã®å„ç¨®è¨­å®šé …ç›®ã‚’å¤‰æ›´ãƒ»ç¢ºèªã§ãã‚‹ç®¡ç†ç”¨ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚",
                    "usage": "settings [é …ç›®] [å€¤]",
                    "usage_explanation": "é …ç›®: å¤‰æ›´ã—ãŸã„è¨­å®šé …ç›®ã€å€¤: æ–°ã—ã„è¨­å®šå€¤",
                    "examples": [
                        {"description": "è¨­å®šãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¡¨ç¤º", "command": "settings"}
                    ],
                    "permissions": "ç®¡ç†è€…æ¨©é™æ¨å¥¨",
                    "cooldown": null,
                    "notes": ["é‡è¦ãªè¨­å®šå¤‰æ›´ã¯ç®¡ç†è€…ãŒè¡Œã£ã¦ãã ã•ã„"]
                },
                {
                    "name": "purge",
                    "category": "management",
                    "description": "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ä¸€æ‹¬å‰Šé™¤",
                    "detailed_description": "ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰å°‚ç”¨ã§ã€æŒ‡å®šã•ã‚ŒãŸæ•°ãŠã‚ˆã³æœŸé–“å†…ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‰Šé™¤ã—ã¾ã™ã€‚",
                    "usage": "/purge [amount] [time] [user]",
                    "usage_explanation": "amount: å‰Šé™¤æ•°(æœ€å¤§100)ã€time: æœŸé–“æŒ‡å®šã€user: å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼",
                    "examples": [
                        {"description": "ç›´è¿‘5ä»¶å‰Šé™¤", "command": "/purge"},
                        {"description": "10ä»¶å‰Šé™¤", "command": "/purge amount:10"},
                        {"description": "1é€±é–“åˆ†å‰Šé™¤", "command": "/purge amount:100 time:1w"}
                    ],
                    "permissions": "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç®¡ç†æ¨©é™",
                    "cooldown": "30ç§’",
                    "notes": [
                        "âš ï¸ ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰å°‚ç”¨",
                        "âš ï¸ ä¸å¯é€†ãªæ“ä½œã§ã™",
                        "ğŸ’¡ æ™‚é–“ä¾‹: 1w=é€±ã€1d=æ—¥ã€1h=æ™‚é–“"
                    ]
                }
            ]
        };

        // ã‚«ãƒ†ã‚´ãƒªè¨­å®š
        const categoryConfig = {
            "basic": { color: "blue", icon: "fas fa-info-circle", name: "åŸºæœ¬", bgColor: "bg-blue-50", textColor: "text-blue-600", borderColor: "border-blue-200" },
            "test": { color: "green", icon: "fas fa-vial", name: "ãƒ†ã‚¹ãƒˆ", bgColor: "bg-green-50", textColor: "text-green-600", borderColor: "border-green-200" },
            "management": { color: "red", icon: "fas fa-cogs", name: "ç®¡ç†", bgColor: "bg-red-50", textColor: "text-red-600", borderColor: "border-red-200" }
        };

        // DOMè¦ç´ 
        const commandsContainer = document.getElementById('commandsContainer');
        const commandsContainerMobile = document.getElementById('commandsContainerMobile');
        const loadingMessage = document.getElementById('loadingMessage');
        const noResults = document.getElementById('noResults');
        const searchInput = document.getElementById('searchInput');
        const commandCount = document.getElementById('commandCount');
        const filterButtons = document.getElementById('filterButtons');
        const nameSearchBtn = document.getElementById('nameSearchBtn');
        const fullSearchBtn = document.getElementById('fullSearchBtn');
        const expandAllBtn = document.getElementById('expandAllBtn');
        const collapseAllBtn = document.getElementById('collapseAllBtn');

        let searchMode = 'name';
        let allCommands = [];
        let searchTimeout = null;

        // ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ç”¨ã‚«ãƒ¼ãƒ‰ä½œæˆ
        function createDesktopCard(command) {
            const config = categoryConfig[command.category];

            return `
                <div class="command-card bg-white rounded-lg shadow-md border border-gray-200 hover:shadow-lg" data-category="${command.category}" data-command="${command.name}">
                    <!-- Header -->
                    <div class="p-4 border-b border-gray-100">
                        <div class="flex items-start justify-between">
                            <div class="flex items-center">
                                <div class="w-10 h-10 ${config.bgColor} rounded-lg flex items-center justify-center mr-3">
                                    <i class="${config.icon} ${config.textColor} text-lg"></i>
                                </div>
                                <div>
                                    <h3 class="font-bold text-lg text-gray-900">${command.name}</h3>
                                    <span class="inline-block px-2 py-1 text-xs font-medium ${config.bgColor} ${config.textColor} rounded-full mt-1">
                                        ${config.name}
                                    </span>
                                </div>
                            </div>
                            <button class="toggle-details text-gray-400 hover:text-gray-600 p-2 rounded-md hover:bg-gray-100">
                                <i class="fas fa-chevron-down text-sm transform transition-transform duration-200"></i>
                            </button>
                        </div>

                        <p class="text-gray-700 mt-3 mb-2">${command.description}</p>

                        <!-- Quick Info -->
                        <div class="flex flex-wrap gap-3 text-xs text-gray-500">
                            <span><i class="fas fa-terminal mr-1"></i>${command.usage}</span>
                            <span><i class="fas fa-shield-alt mr-1"></i>${command.permissions}</span>
                            ${command.cooldown ? `<span><i class="fas fa-clock mr-1"></i>${command.cooldown}</span>` : ''}
                        </div>
                    </div>

                    <!-- Expandable Details -->
                    <div class="details-content">
                        <div class="p-4 space-y-4">
                            <!-- Usage Examples -->
                            <div>
                                <h4 class="font-semibold text-gray-900 mb-2 text-sm">ä½¿ç”¨ä¾‹</h4>
                                <div class="space-y-2">
                                    ${command.examples.map(example => `
                                        <div class="bg-gray-50 p-2 rounded text-xs">
                                            <div class="text-gray-600 mb-1">${example.description}:</div>
                                            <code class="text-green-600 font-mono">${example.command}</code>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>

                            ${command.notes && command.notes.length > 0 ? `
                                <div>
                                    <h4 class="font-semibold text-gray-900 mb-2 text-sm">æ³¨æ„äº‹é …ãƒ»Tips</h4>
                                    <div class="space-y-1">
                                        ${command.notes.map(note => `
                                            <div class="text-xs text-gray-600 flex items-start">
                                                <i class="fas fa-lightbulb ${config.textColor} mr-1 mt-0.5 text-xs"></i>
                                                <span>${note}</span>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `;
        }

        // ãƒ¢ãƒã‚¤ãƒ«ç”¨ã‚«ãƒ¼ãƒ‰ä½œæˆ
        function createMobileCard(command) {
            const config = categoryConfig[command.category];

            return `
                <div class="command-card bg-white rounded-lg shadow-md border border-gray-200" data-category="${command.category}" data-command="${command.name}">
                    <!-- Compact Header -->
                    <div class="p-3">
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center">
                                <div class="w-8 h-8 ${config.bgColor} rounded-md flex items-center justify-center mr-2">
                                    <i class="${config.icon} ${config.textColor} text-sm"></i>
                                </div>
                                <div>
                                    <h3 class="font-bold text-base text-gray-900">${command.name}</h3>
                                    <span class="inline-block px-1.5 py-0.5 text-xs font-medium ${config.bgColor} ${config.textColor} rounded">
                                        ${config.name}
                                    </span>
                                </div>
                            </div>
                            <button class="toggle-details text-gray-400 hover:text-gray-600 p-2 rounded-md hover:bg-gray-100">
                                <i class="fas fa-chevron-down text-xs transform transition-transform duration-200"></i>
                            </button>
                        </div>

                        <p class="text-gray-700 text-sm mb-2">${command.description}</p>

                        <!-- Basic Info -->
                        <div class="text-xs text-gray-500 space-y-1">
                            <div><i class="fas fa-terminal mr-1 w-3"></i>${command.usage}</div>
                            <div><i class="fas fa-shield-alt mr-1 w-3"></i>${command.permissions}</div>
                        </div>
                    </div>

                    <!-- Expandable Details -->
                    <div class="details-content">
                        <div class="px-3 pb-3 border-t border-gray-100">
                            <div class="pt-3 space-y-3">
                                <!-- Examples -->
                                <div>
                                    <h4 class="font-semibold text-gray-900 mb-1 text-sm">ä½¿ç”¨ä¾‹</h4>
                                    <div class="space-y-1">
                                        ${command.examples.slice(0, 2).map(example => `
                                            <div class="bg-gray-50 p-2 rounded text-xs">
                                                <div class="text-gray-600 mb-1">${example.description}</div>
                                                <code class="text-green-600 font-mono">${example.command}</code>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>

                                ${command.notes && command.notes.length > 0 ? `
                                    <div>
                                        <h4 class="font-semibold text-gray-900 mb-1 text-sm">Tips</h4>
                                        <div class="space-y-1">
                                            ${command.notes.slice(0, 3).map(note => `
                                                <div class="text-xs text-gray-600">${note}</div>
                                            `).join('')}
                                        </div>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // å€‹åˆ¥ã‚«ãƒ¼ãƒ‰ã®è©³ç´°è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ - ä¿®æ­£ç‰ˆ
        function setupToggleHandlers() {
            // æ—¢å­˜ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’å‰Šé™¤ã—ã¦ã‹ã‚‰æ–°ã—ãè¿½åŠ 
            document.removeEventListener('click', handleToggleClick);
            document.addEventListener('click', handleToggleClick);
        }

        function handleToggleClick(e) {
            const toggleBtn = e.target.closest('.toggle-details');
            if (!toggleBtn) return;

            e.preventDefault();
            e.stopPropagation();

            const card = toggleBtn.closest('.command-card');
            const details = card.querySelector('.details-content');
            const icon = toggleBtn.querySelector('i');

            details.classList.toggle('expanded');
            icon.classList.toggle('rotate-180');
        }

        // å…¨ä½“å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿æ©Ÿèƒ½
        function expandAllDetails() {
            document.querySelectorAll('.details-content').forEach(details => {
                details.classList.add('expanded');
            });
            document.querySelectorAll('.toggle-details i').forEach(icon => {
                icon.classList.add('rotate-180');
            });
        }

        function collapseAllDetails() {
            document.querySelectorAll('.details-content').forEach(details => {
                details.classList.remove('expanded');
            });
            document.querySelectorAll('.toggle-details i').forEach(icon => {
                icon.classList.remove('rotate-180');
            });
        }

        // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒœã‚¿ãƒ³ä½œæˆ
        function createFilterButtons() {
            const categories = [...new Set(commandsData.commands.map(cmd => cmd.category))];

            categories.forEach(category => {
                const config = categoryConfig[category];
                const button = document.createElement('button');
                button.className = 'filter-btn bg-gray-200 text-gray-700 px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors hover:bg-gray-300';
                button.innerHTML = `<i class="${config.icon} mr-1 sm:mr-2"></i>${config.name}`;
                button.onclick = () => filterCommands(category);
                filterButtons.appendChild(button);
            });
        }

        // æ¤œç´¢ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ
        function toggleSearchMode(mode) {
            searchMode = mode;

            if (mode === 'name') {
                nameSearchBtn.classList.add('bg-white', 'text-discord');
                nameSearchBtn.classList.remove('text-white');
                fullSearchBtn.classList.remove('bg-white', 'text-discord');
                fullSearchBtn.classList.add('text-white');
                searchInput.placeholder = 'ã‚³ãƒãƒ³ãƒ‰åã§æ¤œç´¢...';
            } else {
                fullSearchBtn.classList.add('bg-white', 'text-discord');
                fullSearchBtn.classList.remove('text-white');
                nameSearchBtn.classList.remove('bg-white', 'text-discord');
                nameSearchBtn.classList.add('text-white');
                searchInput.placeholder = 'å…¨æ–‡æ¤œç´¢...';
            }

            if (searchInput.value) {
                performSearch();
            }
        }

        // æ¤œç´¢å®Ÿè¡Œ
        function performSearch() {
            const searchTerm = searchInput.value.toLowerCase();
            const commandCards = document.querySelectorAll('.command-card');
            let visibleCards = 0;

            commandCards.forEach(card => {
                const commandName = card.dataset.command.toLowerCase();
                let shouldShow = false;

                if (searchMode === 'name') {
                    shouldShow = commandName.includes(searchTerm);
                } else {
                    const cardText = card.textContent.toLowerCase();
                    shouldShow = cardText.includes(searchTerm);
                }

                if (shouldShow) {
                    card.style.display = 'block';
                    visibleCards++;
                } else {
                    card.style.display = 'none';
                }
            });

            noResults.style.display = visibleCards === 0 ? 'block' : 'none';
        }

        // debounceä»˜ãæ¤œç´¢ - é…å»¶æ™‚é–“ã‚’150msã«çŸ­ç¸®
        function debouncedSearch() {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(performSearch, 150); // 300ms -> 150ms
        }

        // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½
        function filterCommands(category) {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('bg-discord', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });

            event.target.classList.remove('bg-gray-200', 'text-gray-700');
            event.target.classList.add('bg-discord', 'text-white');

            const commandCards = document.querySelectorAll('.command-card');
            let visibleCards = 0;

            commandCards.forEach(card => {
                if (category === 'all' || card.dataset.category === category) {
                    card.style.display = 'block';
                    visibleCards++;
                } else {
                    card.style.display = 'none';
                }
            });

            noResults.style.display = visibleCards === 0 ? 'block' : 'none';
            searchInput.value = '';
        }

        // ã‚³ãƒãƒ³ãƒ‰èª­ã¿è¾¼ã¿
        function loadCommands() {
            loadingMessage.style.display = 'none';
            allCommands = commandsData.commands;

            createFilterButtons();

            const desktopCards = allCommands.map(command => createDesktopCard(command)).join('');
            commandsContainer.innerHTML = desktopCards;

            const mobileCards = allCommands.map(command => createMobileCard(command)).join('');
            commandsContainerMobile.innerHTML = mobileCards;

            setupToggleHandlers();
            commandCount.textContent = `å…¨ ${allCommands.length} ã‚³ãƒãƒ³ãƒ‰`;
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
        document.addEventListener('DOMContentLoaded', function() {
            // æ¤œç´¢ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ
            nameSearchBtn.addEventListener('click', () => toggleSearchMode('name'));
            fullSearchBtn.addEventListener('click', () => toggleSearchMode('full'));

            // æ¤œç´¢ï¼ˆdebounceå¯¾å¿œãƒ»é…å»¶çŸ­ç¸®ï¼‰
            searchInput.addEventListener('input', debouncedSearch);

            // å…¨ä½“å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿
            expandAllBtn.addEventListener('click', expandAllDetails);
            collapseAllBtn.addEventListener('click', collapseAllDetails);

            // ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹
            const backToTopBtn = document.getElementById('backToTop');
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    backToTopBtn.classList.remove('opacity-0', 'pointer-events-none');
                } else {
                    backToTopBtn.classList.add('opacity-0', 'pointer-events-none');
                }
            });
            backToTopBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            loadCommands();
        });
    </script>
</body>
</html>
